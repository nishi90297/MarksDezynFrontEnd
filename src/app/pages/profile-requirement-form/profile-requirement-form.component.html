<div *ngIf="clientProfileData" class="card ">
    <div class="card-body">
      <h4></h4>
      <h6 class="card-subtitle mb-2">
        <div class="row">
          <div class="offset-md-1 col-md-3">
            <b>Client ID : {{clientProfileData.id}}</b><br>
          </div>
          <div class="offset-md-4 col-md-4">
            <b>Client NAME : {{clientProfileData.name}}</b><br>
          </div>
        </div>
      </h6>
      <ul class="list-group list-group-flush">

        <!-- ADD ONSITE -->
        <li class="list-group-item">
          <div class="row boqHeaderRow">
            <div class="col-md-12" >
              <div class="row">
                <div class="col-md-6" style="margin: auto;">
                  <div class="form-check-inline boqTitleBox">
                    <input type="checkbox" class="form-check-input" id="addOnSiteCheck" [(ngModel)]="addOnSiteCheck">
                    <label for="addOnSiteCheck" class="form-check-label" >ADD ON SITE</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group row titleTotalBox"  style="margin: auto;">
                    <label class="col-sm-4 col-form-label">Total : </label>
                    <div class="col-sm-4">
                      <input type="number" class="form-control-plaintext" readOnly placeholder="0" [(ngModel)]="onSiteTotal" disabled>
                    </div>
                  </div>
                </div>
                <div class="col-md-2 boqTitleOptions">
                  <i class="fa fa-refresh" (click)="onSiteRefresh()" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="addOnSiteCheck">
            <div class="col-md-12">
              <form #onSiteForm=ngForm>
                <div class="row onSiteSelectorRow" >
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Category</label>
                      <select name="onSiteCategory" (change)="getOnSiteDataDetails($event.target.value)" [(ngModel)]="onSiteCategory" required class="form-control">
                        <option value="0" selected>Select Category</option>
                        <option *ngFor="let category of onSiteCategories" [value]="category.category">{{category.category}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Entity</label>
                      <select name="entity"  [(ngModel)]="onSiteEntity" required class="form-control">
                        <option value="0" selected>Select Entity</option>
                        <option *ngFor="let entity of onSiteAllEntityData" [value]="entity.item_description">{{entity.item_description}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-2" style="text-align: center; margin:auto;">
                    <button type="button" [disabled]="(onSiteForm.invalid)"  class="btn btn-primary" (click)="addOnSiteEntry(onSiteCategory,onSiteEntity)">ADD</button>
                  </div>
                  <div class="col-md-2" style="text-align: center; margin:auto;">
                    <button type="button"  class="btn btn-primary" (click)="addOnSiteEntry('allCatgeories','allEntities')">Add ALL</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div *ngIf="addOnSiteCheck">
            <div *ngFor="let row of onSiteRows; let i=index" class="row">
              <div class="col-md-12" style="border: solid thin #ccc;border-radius:3px;padding: 0.8rem;">
                <div class="row onSiteDataRow">
                  <div class="col-md-6">
                    <p><b> {{i+1}}) {{row.item_type}}</b></p>
                    <p>{{row.item_description}}</p>
                    <p>Unit: {{row.unit}}| Rate : {{row.rate}}</p>
                  </div>
                  <div class="col-md-5">
                    <p>
                      <input type="Number"  placeholder="Quantity" [(ngModel)]="onSiteResponseArray[i].quantity" (change)="updateOnSiteTotalEvent((onSiteResponseArray[i].quantity)*row.rate,onSiteResponseArray[i].id)">
                      <!-- (onSiteResponseArray[i].quantity)*row.rate,onSiteResponseArray[i].id -->
                      <input type="number" name="total" [value]="(onSiteResponseArray[i].quantity)*row.rate"  placeholder="Total">
                    </p>
                    <form #addOnSiteContentForm="ngForm">
                      <p>
                        <input *ngIf="row.nos=='true'" type="Number" [ngModelOptions]="{standalone: true}" [(ngModel)]="onSiteResponseArray[i].nos" placeholder="NOS">
                        <input *ngIf="row.length=='true'" type="Number" [ngModelOptions]="{standalone: true}" [(ngModel)]="onSiteResponseArray[i].length" placeholder="LENGTH">
                        <input *ngIf="row.height=='true'" type="Number" [ngModelOptions]="{standalone: true}" [(ngModel)]="onSiteResponseArray[i].height" placeholder="HEIGHT">
                        <input *ngIf="row.width=='true'" type="Number" [ngModelOptions]="{standalone: true}" [(ngModel)]="onSiteResponseArray[i].width"  placeholder="WIDTH/DEPTH">
                      </p>
                    </form>
                  </div>
                  <div class="col-md-1">
                    <i class="fa fa-trash" (click)="onSiteDelete(row.id)" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
        <!-- ADD FURNITURE -->
        <li class="list-group-item">
          <div class="row boqHeaderRow">
            <div class="col-md-12" >
              <div class="row">
                <div class="col-md-6" style="margin: auto;">
                  <div class="form-check-inline boqTitleBox">
                    <input type="checkbox" class="form-check-input" id="addFurnitureCheck" [(ngModel)]="addFurnitureCheck">
                    <label for="addFurnitureCheck" class="form-check-label">ADD FURNITURE</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group row titleTotalBox"  style="margin: auto;">
                    <label class="col-sm-4 col-form-label">Total : </label>
                    <div class="col-sm-4">
                      <input type="number"  readonly class="form-control-plaintext" placeholder="0" [(ngModel)]="furnitureTotal" disabled>
                    </div>
                  </div>
                </div>
                <div class="col-md-2 boqTitleOptions">
                  <i class="fa fa-refresh" (click)="furnitureRefresh()" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="addFurnitureCheck">
            <div class="col-md-12">
              <form #furnitureForm=ngForm>
                <div class="row furnitureSelectorRow" >
                  <div class="col-md-2">
                    <div class="form-group">
                      <label>Search By</label>
                      <select name="furnitureCategory" (change)="changeFurnitureSearchType($event.target.value)" required class="form-control">
                        <option value="item_code" selected>Item Code</option>
                        <option value="item_description">Item Description</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <div class="form-group">
                      <label>Entity</label>
                      <input class="form-control" list="datalist" #furnitureSearchTerm  type="text" [(ngModel)]="selectedFurnitureEntry" name="selectedFurnitureEntry" required>
                      <datalist id="datalist" *ngIf="searchOptionsFurniture.searchBy == 'item_code'">
                        <option *ngFor="let item of furnitureAllEntityData"> {{item.item_code}}</option>
                      </datalist>

                      <datalist id="datalist" *ngIf="searchOptionsFurniture.searchBy == 'item_description'">
                        <option *ngFor="let item of furnitureAllEntityData"> {{item.item_description}}</option>
                      </datalist>
                    </div>
                  </div>
                  <div class="col-md-1" style="text-align: center; margin:auto;">
                    <button type="button" [disabled]="(furnitureForm.invalid)"  class="btn btn-primary" (click)="addFurnitureEntry(selectedFurnitureEntry)">ADD</button>
                  </div>
                  <!-- <div class="col-md-2" style="text-align: center; margin:auto;">
                    <button type="button"  class="btn btn-primary" (click)="addFurnitureEntry('allCatgeories','allEntities')">Add ALL</button>
                  </div> -->
                </div>
              </form>
            </div>
          </div>
          <div *ngIf="furnitureRows.length!=0">
            <div *ngFor="let row of furnitureRows; let i=index" class="row">
              <div class="col-md-12" style="border: solid thin #ccc;border-radius:3px;padding: 0.8rem;">
                <div class="row furnitureDataRow">
                  <div class="col-md-6">
                    <p><b> {{i+1}}) {{row.item_type}}</b></p>
                    <p>{{row.item_description}}</p>
                    <p>Unit: {{row.unit}}| Rate : {{row.rate}}</p>
                    <p>Amount: {{row.amount}}| Piece Quantity : {{row.piece_quantity}}</p>
                  </div>
                  <div class="col-md-5">
                    <p>
                      <input type="Number"  placeholder="LENGTH" [value]="row.length" disabled>
                      <input type="Number"  placeholder="BREADTH" [value]="row.breadth" disabled>
                      <input type="Number"  placeholder="HEIGHT" [value]="row.height" disabled>
                      <input type="Number"  placeholder="Fabric Meter" [(ngModel)]="furnitureResponseArray[i].fabric_m">
                      <input type="Number"  placeholder="Quantity" [(ngModel)]="furnitureResponseArray[i].quantity" (change)="updateFurnitureTotalEvent((furnitureResponseArray[i].quantity)*row.main_rate,furnitureResponseArray[i].id)">
                      <input type="Number" name="total" [value]="(furnitureResponseArray[i].quantity)*row.main_rate"  placeholder="Total">
                    </p>
                  </div>
                  <div class="col-md-1">
                    <i class="fa fa-trash" (click)="furnitureDelete(row.id)" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
        <!-- ADD MODULAR -->
        <li class="list-group-item">
          <div class="row boqHeaderRow">
            <div class="col-md-12" >
              <div class="row">
                <div class="col-md-6" style="margin: auto;">
                  <div class="form-check-inline boqTitleBox">
                    <input type="checkbox"  class="form-check-input" id="addModularCheck" [(ngModel)]="addModularCheck">
                    <label for="addModularCheck" class="form-check-label">ADD MODULAR</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group row titleTotalBox"  style="margin: auto;">
                    <label class="col-sm-4 col-form-label">Total : </label>
                    <div class="col-sm-4">
                      <input type="number" class="form-control-plaintext" readOnly placeholder="0" [(ngModel)]="modularTotal" disabled>
                    </div>
                  </div>
                </div>
                <div class="col-md-2 boqTitleOptions">
                  <i class="fa fa-refresh" (click)="modularRefresh()" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="addModularCheck">
            <div class="col-md-12">
              <form #modularForm=ngForm>
                <div class="row modularSelectorRow" >
                  <div class="col-md-2">
                    <div class="form-group">
                      <label>Search By</label>
                      <select name="modularCategory" (change)="changeModularSearchType($event.target.value)" required class="form-control">
                        <option value="item_code" selected>Item Code</option>
                        <option value="item_description">Item Description</option>
                      </select>
                      <!--<label>Category</label>
                      <select name="" (change)="getModularDataDetails($event.target.value)" [(ngModel)]="modularCategory" required class="form-control">
                        <option value="0" selected>Select Category</option>
                        <option *ngFor="let category of modularCategories" [value]="category.category">{{category.category}}</option>
                      </select>-->
                    </div>
                  </div>
                  <div class="col-md-9">
                    <div class="form-group">
                      <label>Entity</label>
                      <input class="form-control" list="datalistModular" #furnitureSearchTerm  type="text" [(ngModel)]="selectedModularEntry" name="selectedModularEntry" required>
                      <datalist id="datalistModular" *ngIf="searchOptionsModular.searchBy == 'item_code'">
                        <option *ngFor="let item of modularAllEntityData"> {{item.item_code}}</option>
                      </datalist>

                      <datalist id="datalistModular" *ngIf="searchOptionsModular.searchBy == 'item_description'">
                        <option *ngFor="let item of modularAllEntityData"> {{item.item_description}}</option>
                      </datalist>
                    </div>
                  </div>
                  <div class="col-md-1" style="text-align: center; margin:auto;">
                    <button type="button" [disabled]="(modularForm.invalid)"  class="btn btn-primary" (click)="addModularEntry(selectedModularEntry)">ADD</button>
                  </div>
                  <!-- <div class="col-md-2" style="text-align: center; margin:auto;">
                    <button type="button"  class="btn btn-primary" (click)="addModularEntry('allCatgeories','allEntities')">Add ALL</button>
                  </div> -->
                </div>
              </form>
            </div>
          </div>
          <div *ngIf="addModularCheck">
            <div *ngFor="let row of modularRows; let i=index" class="row">
              <div class="col-md-12" style="border: solid thin #ccc;border-radius:3px;padding: 0.8rem;">
                <div class="row modularDataRow">
                  <div class="col-md-6">
                    <p><b> {{i+1}}) {{row.item_type}}</b></p>
                    <p>{{row.item_description}}</p>
                    <p>Unit: {{row.unit}}| Rate : {{row.rate}}</p>
                  </div>
                  <div class="col-md-5">
                    <p>
                      <p>
                        <input type="Number"  placeholder="LENGTH" [value]="row.length" disabled>
                        <input type="Number"  placeholder="BREADTH" [value]="row.breadth" disabled>
                        <input type="Number"  placeholder="HEIGHT" [value]="row.height" disabled>
                        <input type="Number"  placeholder="Fabric Meter" [(ngModel)]="modularResponseArray[i].fabric_m">
                        <input type="Number"  placeholder="Quantity" [(ngModel)]="modularResponseArray[i].quantity" (change)="updateModularTotalEvent((modularResponseArray[i].quantity)*row.main_rate,modularResponseArray[i].id)">
                        <input type="number" name="total" [value]="(modularResponseArray[i].quantity)*row.main_rate"  placeholder="Total">
                      </p>
                  </div>
                  <div class="col-md-1">
                    <i class="fa fa-trash" (click)="modularDelete(row.id)" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
      <div class="row" >
        <div class="col-md-12" style="text-align: center;">
          <button class="btn btn-primary" type="submit" (click)=sendFinalSubmitData()>Submit</button>
        </div>
      </div>
    </div>
</div>

